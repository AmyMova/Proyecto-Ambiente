<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <style>
    /* Estilos CSS como antes */
  </style>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    function calcular() {
      const valorTotal = parseFloat(document.getElementById('valorTotal').value);
      const duracion = document.getElementById('duracion').value;
      let porcentaje;
      let minimo;

      switch (duracion) {
        case '3meses':
          porcentaje = 0.4;
          break;
        case '1mes':
          porcentaje = 0.2;
          break;
        case '1semana':
          porcentaje = 0.1;
          break;
        default:
          porcentaje = 0;
          break;
      }

      minimo = valorTotal * porcentaje;

      document.getElementById('porcentaje').innerText = `Porcentaje a dejar: ${porcentaje * 100}%`;
      document.getElementById('minimo').innerText = `Mínimo a dejar: ${minimo.toFixed(2)}`;
    }

    function pagar() {
      const aporteUsuario = parseFloat(document.getElementById('aporteUsuario').value);
      const metodoPago = document.getElementById('metodoPago').value;

      if (metodoPago === 'efectivo') {
        const minimo = parseFloat(document.getElementById('minimo').innerText.split(':')[1].trim());
        const vuelto = aporteUsuario - minimo;

        if (vuelto >= 0) {
          Swal.fire({
            title: '¡Pago exitoso!',
            text: `Vuelto a entregar: ${vuelto.toFixed(2)}`,
            icon: 'success'
          }).then(() => {
            reiniciarCampos();
          });
        } else {
          Swal.fire({
            title: 'Error',
            text: 'El aporte del usuario es inferior al mínimo requerido. ',
            icon: 'error'
          });
        }
      } else {
        Swal.fire({
          title: '¡Pago exitoso!',
          text: 'Se ha realizado el pago con tarjeta.',
          icon: 'success'
        }).then(() => {
          reiniciarCampos();
        });
      }
    }

    function reiniciarCampos() {
      document.getElementById('valorTotal').value = '';
      document.getElementById('duracion').value = '';
      document.getElementById('aporteUsuario').value = '';
      document.getElementById('metodoPago').value = '';

      document.getElementById('porcentaje').innerText = '';
      document.getElementById('minimo').innerText = '';
    }
  </script>
</head>
<body>

<div class="container">
  <div class="form-group">
    <label for="valorTotal">Valor Total:</label>
    <input type="number" id="valorTotal" placeholder="Ingrese el valor total">
  </div>

  <div class="form-group">
    <label for="duracion">Duración:</label>
    <select id="duracion">
      <option value="3meses">3 Meses</option>
      <option value="1mes">1 Mes</option>
      <option value="1semana">1 Semana</option>
    </select>
  </div>

  <button onclick="calcular()">Calcular</button>

  <div id="result">
    <p id="porcentaje"></p>
    <p id="minimo"></p>
  </div>

  <div class="form-group">
    <label for="aporteUsuario">Aporte del Usuario:</label>
    <input type="number" id="aporteUsuario" placeholder="Ingrese el aporte del usuario">
  </div>

  <div class="form-group">
    <label for="metodoPago">Método de Pago:</label>
    <select id="metodoPago">
      <option value="efectivo">Efectivo</option>
      <option value="tarjeta">Tarjeta</option>
    </select>
  </div>

  <button onclick="pagar()">Pagar</button>
</div>

</body>
</html>
